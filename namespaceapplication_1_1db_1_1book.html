<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Skrunk Server: application.db.book Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Skrunk Server
   </div>
   <div id="projectbrief">An all-in-one database solution to help manage data and make my life easier.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceapplication_1_1db_1_1book.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">application.db.book Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a489dd7a7cd69e687da8a812326342817" id="r_a489dd7a7cd69e687da8a812326342817"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a489dd7a7cd69e687da8a812326342817">init</a> ()</td></tr>
<tr class="separator:a489dd7a7cd69e687da8a812326342817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff992f88f0c3ce2d1a1ace7300273731" id="r_aff992f88f0c3ce2d1a1ace7300273731"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#aff992f88f0c3ce2d1a1ace7300273731">process_share_hist</a> (list share_history)</td></tr>
<tr class="separator:aff992f88f0c3ce2d1a1ace7300273731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae566d13ab23f223051e92d14dbf5c1d8" id="r_ae566d13ab23f223051e92d14dbf5c1d8"><td class="memItemLeft" align="right" valign="top">list[str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#ae566d13ab23f223051e92d14dbf5c1d8">keyword_tokenize</a> (str text)</td></tr>
<tr class="separator:ae566d13ab23f223051e92d14dbf5c1d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad82854c605e43eb4b48ea65e4f187f76" id="r_ad82854c605e43eb4b48ea65e4f187f76"><td class="memItemLeft" align="right" valign="top">list[str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#ad82854c605e43eb4b48ea65e4f187f76">build_keywords</a> (dict book_data)</td></tr>
<tr class="separator:ad82854c605e43eb4b48ea65e4f187f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a079308f5a61668b75eb45df21ae8e384" id="r_a079308f5a61668b75eb45df21ae8e384"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a079308f5a61668b75eb45df21ae8e384">process_book_tag</a> (dict book_data)</td></tr>
<tr class="separator:a079308f5a61668b75eb45df21ae8e384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945ffe237dcd5f6ed2f41e23762a5384" id="r_a945ffe237dcd5f6ed2f41e23762a5384"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a945ffe237dcd5f6ed2f41e23762a5384">get_book_tag</a> (str rfid, *bool parse=False)</td></tr>
<tr class="separator:a945ffe237dcd5f6ed2f41e23762a5384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c18efafab5ef9c7798ee428c02be5b8" id="r_a7c18efafab5ef9c7798ee428c02be5b8"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a7c18efafab5ef9c7798ee428c02be5b8">get_book</a> (str id, *bool parse=False)</td></tr>
<tr class="separator:a7c18efafab5ef9c7798ee428c02be5b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6c0bcce1514cde5c46b87ffb4c151d" id="r_a1c6c0bcce1514cde5c46b87ffb4c151d"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a1c6c0bcce1514cde5c46b87ffb4c151d">next_out_of_date_book_rfid</a> (datetime before)</td></tr>
<tr class="separator:a1c6c0bcce1514cde5c46b87ffb4c151d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73de8f293dff5f7ec6249f2cea3598de" id="r_a73de8f293dff5f7ec6249f2cea3598de"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a73de8f293dff5f7ec6249f2cea3598de">refresh_book_data</a> (str rfid)</td></tr>
<tr class="separator:a73de8f293dff5f7ec6249f2cea3598de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c12e383769e7aef43a4c19a4a1af55c" id="r_a2c12e383769e7aef43a4c19a4a1af55c"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a2c12e383769e7aef43a4c19a4a1af55c">link_book_tag</a> (str owner, str rfid, str book_id)</td></tr>
<tr class="separator:a2c12e383769e7aef43a4c19a4a1af55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08e0abbfc65c70407600115e2f9fda7b" id="r_a08e0abbfc65c70407600115e2f9fda7b"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a08e0abbfc65c70407600115e2f9fda7b">create_book</a> (str owner, dict data)</td></tr>
<tr class="separator:a08e0abbfc65c70407600115e2f9fda7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77c33c66dfbe1c62759dadb339221a5" id="r_ae77c33c66dfbe1c62759dadb339221a5"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#ae77c33c66dfbe1c62759dadb339221a5">unlink_book_tag</a> (str rfid)</td></tr>
<tr class="separator:ae77c33c66dfbe1c62759dadb339221a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a111182c094308d254180e789d6735761" id="r_a111182c094308d254180e789d6735761"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a111182c094308d254180e789d6735761">norm_query</a> (dict query, dict|None ownerq)</td></tr>
<tr class="separator:a111182c094308d254180e789d6735761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4845b4344563650a76de590943e50d" id="r_a2d4845b4344563650a76de590943e50d"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a2d4845b4344563650a76de590943e50d">build_book_query</a> (<a class="el" href="classapplication_1_1objects_1_1BookSearchFilter.html">BookSearchFilter</a> filter, list sort=[])</td></tr>
<tr class="separator:a2d4845b4344563650a76de590943e50d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12521de3ba99c53bf88a379438a71e90" id="r_a12521de3ba99c53bf88a379438a71e90"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a12521de3ba99c53bf88a379438a71e90">get_books</a> (<a class="el" href="classapplication_1_1objects_1_1BookSearchFilter.html">BookSearchFilter</a> filter, int start, int count, <a class="el" href="classapplication_1_1objects_1_1Sorting.html">Sorting</a> sorting)</td></tr>
<tr class="separator:a12521de3ba99c53bf88a379438a71e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c2b7502ff88610c5ea6b21c9c31b9a3" id="r_a5c2b7502ff88610c5ea6b21c9c31b9a3"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a5c2b7502ff88610c5ea6b21c9c31b9a3">count_books</a> (<a class="el" href="classapplication_1_1objects_1_1BookSearchFilter.html">BookSearchFilter</a> filter)</td></tr>
<tr class="separator:a5c2b7502ff88610c5ea6b21c9c31b9a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae900b61961a58bd2551324a9cda362e7" id="r_ae900b61961a58bd2551324a9cda362e7"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#ae900b61961a58bd2551324a9cda362e7">share_book_with_user</a> (str book_id, str username)</td></tr>
<tr class="separator:ae900b61961a58bd2551324a9cda362e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e108f60a26b843794573c6eb1f6855f" id="r_a3e108f60a26b843794573c6eb1f6855f"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a3e108f60a26b843794573c6eb1f6855f">share_book_with_non_user</a> (str book_id, str name)</td></tr>
<tr class="separator:a3e108f60a26b843794573c6eb1f6855f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3657df852f8b3559cc02459939e78230" id="r_a3657df852f8b3559cc02459939e78230"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a3657df852f8b3559cc02459939e78230">borrow_book</a> (str book_id, dict user_data)</td></tr>
<tr class="separator:a3657df852f8b3559cc02459939e78230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6f7d9e683c20144c289b18db8a2f898" id="r_ac6f7d9e683c20144c289b18db8a2f898"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#ac6f7d9e683c20144c289b18db8a2f898">return_book</a> (str book_id, dict user_data)</td></tr>
<tr class="separator:ac6f7d9e683c20144c289b18db8a2f898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe4d5cfe9e99e63202c9f89f81cc7c2a" id="r_abe4d5cfe9e99e63202c9f89f81cc7c2a"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#abe4d5cfe9e99e63202c9f89f81cc7c2a">set_book_owner</a> (str id, str username)</td></tr>
<tr class="separator:abe4d5cfe9e99e63202c9f89f81cc7c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf831a4b533b6d4f483af68e3b60fd81" id="r_aaf831a4b533b6d4f483af68e3b60fd81"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#aaf831a4b533b6d4f483af68e3b60fd81">edit_book</a> (str id, dict new_data)</td></tr>
<tr class="separator:aaf831a4b533b6d4f483af68e3b60fd81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb8b17fd66d8b20133a0924270486f3" id="r_a1fb8b17fd66d8b20133a0924270486f3"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a1fb8b17fd66d8b20133a0924270486f3">count_all_user_books</a> (list|None filter_users=None)</td></tr>
<tr class="separator:a1fb8b17fd66d8b20133a0924270486f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70365d6cffaabc930a6a0f7fc28906e3" id="r_a70365d6cffaabc930a6a0f7fc28906e3"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a70365d6cffaabc930a6a0f7fc28906e3">append_ebook</a> (str book_id, str ebook_url)</td></tr>
<tr class="separator:a70365d6cffaabc930a6a0f7fc28906e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a247939c89046dfb1572a1c19b60446c6" id="r_a247939c89046dfb1572a1c19b60446c6"><td class="memItemLeft" align="right" valign="top"><a id="a247939c89046dfb1572a1c19b60446c6" name="a247939c89046dfb1572a1c19b60446c6"></a>
Collection&#160;</td><td class="memItemRight" valign="bottom"><b>db</b> = None</td></tr>
<tr class="memdesc:a247939c89046dfb1572a1c19b60446c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the Book collection in the database. <br /></td></tr>
<tr class="separator:a247939c89046dfb1572a1c19b60446c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca3efd9b567bf94e0d23dacf75232573" id="r_aca3efd9b567bf94e0d23dacf75232573"><td class="memItemLeft" align="right" valign="top"><a id="aca3efd9b567bf94e0d23dacf75232573" name="aca3efd9b567bf94e0d23dacf75232573"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SUBSONIC</b> = None</td></tr>
<tr class="memdesc:aca3efd9b567bf94e0d23dacf75232573"><td class="mdescLeft">&#160;</td><td class="mdescRight">The client object that handles all Subsonic API requests. <br /></td></tr>
<tr class="separator:aca3efd9b567bf94e0d23dacf75232573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6eda017a0786d7b6359f440e8ad167" id="r_a5c6eda017a0786d7b6359f440e8ad167"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapplication_1_1db_1_1book.html#a5c6eda017a0786d7b6359f440e8ad167">_P</a></td></tr>
<tr class="memdesc:a5c6eda017a0786d7b6359f440e8ad167"><td class="mdescLeft">&#160;</td><td class="mdescRight">Regular expressions used for extracting keywords from text.  <br /></td></tr>
<tr class="separator:a5c6eda017a0786d7b6359f440e8ad167"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">application.db.book</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a70365d6cffaabc930a6a0f7fc28906e3" name="a70365d6cffaabc930a6a0f7fc28906e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70365d6cffaabc930a6a0f7fc28906e3">&#9670;&#160;</a></span>append_ebook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.append_ebook </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>book_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>ebook_url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Append an ebook to the book's ebook list and update the database.

    Args:
        book_id (str): The unique identifier of the book.
        ebook_url (str): The URL of the ebook to be appended.

    Returns:
        dict: The updated book data.

    Raises:
        exceptions.BlobDoesNotExistError: If the ebook URL does not exist in the blob storage.</pre> 
</div>
</div>
<a id="a3657df852f8b3559cc02459939e78230" name="a3657df852f8b3559cc02459939e78230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3657df852f8b3559cc02459939e78230">&#9670;&#160;</a></span>borrow_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.borrow_book </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>book_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Allows a user to borrow a book by updating the book's share history and status.

    Args:
        book_id (str): The ID of the book to be borrowed.
        user_data (dict): A dictionary containing user information, including:
            - '_id': The user's unique identifier.
            - 'username': The user's name.

    Returns:
        dict: The data of the book being borrowed.

    Raises:
        exceptions.BookTagDoesNotExistError: If the book with the given ID does not exist.
        exceptions.BookCannotBeShared: If the book is currently being borrowed by another user.</pre> 
</div>
</div>
<a id="a2d4845b4344563650a76de590943e50d" name="a2d4845b4344563650a76de590943e50d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4845b4344563650a76de590943e50d">&#9670;&#160;</a></span>build_book_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.build_book_query </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classapplication_1_1objects_1_1BookSearchFilter.html">BookSearchFilter</a>&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list &#160;</td>
          <td class="paramname"><em>sort</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Builds a MongoDB query and aggregation pipeline based on the provided filter and sort criteria.

    Args:
        filter (BookSearchFilter): A dictionary containing search filters for books.
            - owner (str or list): The owner(s) of the book.
            - author (str): The author of the book.
            - genre (str): The genre of the book.
            - shared (bool): Whether the book is shared.
            - title (str): The title or ISBN of the book.
        sort (list, optional): A list of tuples specifying the sort order. Defaults to [].

    Returns:
        tuple: A tuple containing:
            - aggregate (list or None): The aggregation pipeline if applicable, otherwise None.
            - query (dict): The MongoDB query dictionary.</pre> 
</div>
</div>
<a id="ad82854c605e43eb4b48ea65e4f187f76" name="ad82854c605e43eb4b48ea65e4f187f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad82854c605e43eb4b48ea65e4f187f76">&#9670;&#160;</a></span>build_keywords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[str] application.db.book.build_keywords </td>
          <td>(</td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>book_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Extracts and builds a list of unique keywords from the given book data.

    This function processes specific fields ('title', 'subtitle', 'description', 'authors')
    from the provided book data dictionary. It tokenizes the content of these fields into
    keywords and returns a sorted list of unique keywords.

    Args:
        book_data (dict): A dictionary containing book information. Expected keys are
                          'title', 'subtitle', 'description', and 'authors'. The value
                          for 'authors' can be a list of strings, while the other fields
                          are expected to be strings.

    Returns:
        list[str]: A sorted list of unique keywords extracted from the specified fields
                   in the book data.</pre> 
</div>
</div>
<a id="a1fb8b17fd66d8b20133a0924270486f3" name="a1fb8b17fd66d8b20133a0924270486f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fb8b17fd66d8b20133a0924270486f3">&#9670;&#160;</a></span>count_all_user_books()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list application.db.book.count_all_user_books </td>
          <td>(</td>
          <td class="paramtype">list | None &#160;</td>
          <td class="paramname"><em>filter_users</em> = <code>None</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Count the number of books owned by each user.

    This function aggregates the total number of books for each user in the database.
    It can also filter the results to include only specific users if a list of user IDs is provided.

    Args:
        filter_users (list | None): A list of user IDs to filter the results. If None, all users are included.

    Returns:
        list: A list of dictionaries, each containing the 'owner' information (username and display name) and the 'count' of books owned by that user.</pre> 
</div>
</div>
<a id="a5c2b7502ff88610c5ea6b21c9c31b9a3" name="a5c2b7502ff88610c5ea6b21c9c31b9a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c2b7502ff88610c5ea6b21c9c31b9a3">&#9670;&#160;</a></span>count_books()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list application.db.book.count_books </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classapplication_1_1objects_1_1BookSearchFilter.html">BookSearchFilter</a>&#160;</td>
          <td class="paramname"><em>filter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Count the number of books in the database based on the provided filter.

    Args:
        filter (BookSearchFilter): The filter criteria to search for books.

    Returns:
        int: The count of books that match the filter criteria. Returns 0 if the user does not exist or no books match the criteria.

    Raises:
        exceptions.UserDoesNotExistError: If the user specified in the filter does not exist.</pre> 
</div>
</div>
<a id="a08e0abbfc65c70407600115e2f9fda7b" name="a08e0abbfc65c70407600115e2f9fda7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e0abbfc65c70407600115e2f9fda7b">&#9670;&#160;</a></span>create_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.create_book </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Creates a new book entry in the database.

    Args:
        owner (str): The username of the book owner.
        data (dict): A dictionary containing book information. Expected keys are:
            - 'rfid': The RFID of the book.
            - 'title': The title of the book.
            - 'subtitle': The subtitle of the book.
            - 'authors': A list of authors of the book.
            - 'publisher': The publisher of the book.
            - 'publishedDate': The published date of the book.
            - 'description': A description of the book.
            - 'pageCount': The number of pages in the book.
            - 'thumbnail': A URL to the thumbnail image of the book.
            - 'isbn' (optional): The ISBN of the book.

    Returns:
        dict: A dictionary containing the created book data.</pre> 
</div>
</div>
<a id="aaf831a4b533b6d4f483af68e3b60fd81" name="aaf831a4b533b6d4f483af68e3b60fd81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf831a4b533b6d4f483af68e3b60fd81">&#9670;&#160;</a></span>edit_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.edit_book </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>new_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Edit the details of a book in the database.

    Args:
        id (str): The unique identifier of the book to be edited.
        new_data (dict): A dictionary containing the new data for the book.

    Returns:
        dict: The updated book data.

    This function retrieves the current data of the book using its ID, compares it with the new data provided,
    and updates the fields that have changed. It also updates the 'noSyncFields' to include the changed fields.
    Finally, it updates the book data in the database and returns the updated book data.</pre> 
</div>
</div>
<a id="a7c18efafab5ef9c7798ee428c02be5b8" name="a7c18efafab5ef9c7798ee428c02be5b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c18efafab5ef9c7798ee428c02be5b8">&#9670;&#160;</a></span>get_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.get_book </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*bool &#160;</td>
          <td class="paramname"><em>parse</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Retrieve a book from the database by its ID.

    Args:
        id (str): The ID of the book to retrieve.
        parse (bool, optional): If True, the book data will be processed before returning. Defaults to False.

    Returns:
        dict: The book data, either raw or processed based on the `parse` parameter.

    Raises:
        BookTagDoesNotExistError: If no book with the given ID is found in the database.</pre> 
</div>
</div>
<a id="a945ffe237dcd5f6ed2f41e23762a5384" name="a945ffe237dcd5f6ed2f41e23762a5384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a945ffe237dcd5f6ed2f41e23762a5384">&#9670;&#160;</a></span>get_book_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.get_book_tag </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>rfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*bool &#160;</td>
          <td class="paramname"><em>parse</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Retrieve a book tag from the database using its RFID.

    Args:
        rfid (str): The RFID of the book tag to retrieve.
        parse (bool, optional): If True, the book data will be processed before returning. Defaults to False.

    Returns:
        dict: The book tag data. If `parse` is True, the data will be processed.

    Raises:
        BookTagDoesNotExistError: If no book tag with the given RFID is found in the database.</pre> 
</div>
</div>
<a id="a12521de3ba99c53bf88a379438a71e90" name="a12521de3ba99c53bf88a379438a71e90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12521de3ba99c53bf88a379438a71e90">&#9670;&#160;</a></span>get_books()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list application.db.book.get_books </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classapplication_1_1objects_1_1BookSearchFilter.html">BookSearchFilter</a>&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classapplication_1_1objects_1_1Sorting.html">Sorting</a>&#160;</td>
          <td class="paramname"><em>sorting</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Retrieve a list of books from the database based on the given filter, pagination, and sorting criteria.

    Args:
        filter (BookSearchFilter): The filter criteria to apply to the book search.
        start (int): The starting index for pagination.
        count (int): The number of books to retrieve.
        sorting (Sorting): The sorting criteria, including fields to sort by and order (ascending/descending).

    Returns:
        list: A list of books that match the filter criteria, sorted and paginated as specified.</pre> 
</div>
</div>
<a id="a489dd7a7cd69e687da8a812326342817" name="a489dd7a7cd69e687da8a812326342817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a489dd7a7cd69e687da8a812326342817">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None application.db.book.init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Initialize the Subsonic session and cache data on startup.

    This function retrieves the Subsonic URL, username, and password from the configuration,
    initializes a Subsonic session, and caches album data for later use. If the Subsonic
    module is enabled and the URL is provided, it attempts to connect to the Subsonic server
    and cache album data. If the connection fails, an error message is printed.

    Raises:
        subsonic.SessionError: If unable to connect to the Subsonic server.</pre> 
</div>
</div>
<a id="ae566d13ab23f223051e92d14dbf5c1d8" name="ae566d13ab23f223051e92d14dbf5c1d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae566d13ab23f223051e92d14dbf5c1d8">&#9670;&#160;</a></span>keyword_tokenize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[str] application.db.book.keyword_tokenize </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Tokenizes the input text into a list of unique keywords.

    This function performs the following steps:
    1. Replaces apostrophes (') with an empty string.
    2. Applies a regex substitution to replace non-word characters with spaces.
    3. Applies another regex substitution to replace tags with spaces.
    4. Converts the text to lowercase.
    5. Splits the text into words.
    6. Filters out words with a length of 2 or less.
    7. Removes duplicate words by converting the list to a set and back to a list.

    Args:
        text (str): The input text to be tokenized.

    Returns:
        list[str]: A list of unique keywords extracted from the input text.</pre> 
</div>
</div>
<a id="a2c12e383769e7aef43a4c19a4a1af55c" name="a2c12e383769e7aef43a4c19a4a1af55c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c12e383769e7aef43a4c19a4a1af55c">&#9670;&#160;</a></span>link_book_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.link_book_tag </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>rfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>book_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Links a book tag to a book in the database.

    Args:
        owner (str): The username of the owner of the book.
        rfid (str): The RFID tag to be linked to the book.
        book_id (str): The ID of the book to be linked.

    Returns:
        dict: A dictionary containing the book data after linking the tag.

    Raises:
        BookTagExistsError: If the RFID tag is already linked to a book.</pre> 
</div>
</div>
<a id="a1c6c0bcce1514cde5c46b87ffb4c151d" name="a1c6c0bcce1514cde5c46b87ffb4c151d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6c0bcce1514cde5c46b87ffb4c151d">&#9670;&#160;</a></span>next_out_of_date_book_rfid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> str application.db.book.next_out_of_date_book_rfid </td>
          <td>(</td>
          <td class="paramtype">datetime&#160;</td>
          <td class="paramname"><em>before</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Retrieve the RFID of the next book that is out of date.

    This function queries the database for a book whose 'lastSync' field is 
    earlier than the specified 'before' datetime. If such a book is found, 
    its RFID is returned. If no such book is found, None is returned.

    Args:
        before (datetime): The cutoff datetime to find books that are out of date.

    Returns:
        str: The RFID of the next out-of-date book, or None if no such book is found.</pre> 
</div>
</div>
<a id="a111182c094308d254180e789d6735761" name="a111182c094308d254180e789d6735761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a111182c094308d254180e789d6735761">&#9670;&#160;</a></span>norm_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.norm_query </td>
          <td>(</td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict | None&#160;</td>
          <td class="paramname"><em>ownerq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Normalize a query by combining it with an owner query if provided.

    Args:
        query (dict): The initial query dictionary.
        ownerq (dict | None): An optional owner query dictionary.

    Returns:
        dict: The combined query dictionary if both query and ownerq are provided,
              otherwise returns the non-None query dictionary.</pre> 
</div>
</div>
<a id="a079308f5a61668b75eb45df21ae8e384" name="a079308f5a61668b75eb45df21ae8e384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a079308f5a61668b75eb45df21ae8e384">&#9670;&#160;</a></span>process_book_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.process_book_tag </td>
          <td>(</td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>book_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Processes and enriches book data with additional information.

    Args:
        book_data (dict): A dictionary containing book information.

    Returns:
        dict: The enriched book data dictionary.

    Raises:
        exceptions.UserDoesNotExistError: If the user does not exist.
        exceptions.BlobDoesNotExistError: If the blob does not exist.

    The function performs the following operations:
    - Retrieves and replaces the 'owner' field with user data.
    - Retrieves and replaces the 'thumbnail' field with blob data.
    - Processes the 'shareHistory' field.
    - Renames the '_id' field to 'id'.
    - Builds and adds 'keywords' field.
    - Adds an 'audiobook' field if SUBSONIC is enabled and the album is found.</pre> 
</div>
</div>
<a id="aff992f88f0c3ce2d1a1ace7300273731" name="aff992f88f0c3ce2d1a1ace7300273731"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff992f88f0c3ce2d1a1ace7300273731">&#9670;&#160;</a></span>process_share_hist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list application.db.book.process_share_hist </td>
          <td>(</td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>share_history</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Processes a list of share history records and updates the display name for each record.

    Args:
        share_history (list): A list of dictionaries, where each dictionary represents a share history record.
                              Each record must contain 'user_id' and 'name' keys.

    Returns:
        list: A list of dictionaries with updated 'display_name' keys. If 'user_id' is None, 'display_name' is set to 'name'.
              If 'user_id' is not None, 'display_name' is set to the display name of the user fetched by 'user_id'.
              If the user does not exist, 'display_name' is set to 'name'.</pre> 
</div>
</div>
<a id="a73de8f293dff5f7ec6249f2cea3598de" name="a73de8f293dff5f7ec6249f2cea3598de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73de8f293dff5f7ec6249f2cea3598de">&#9670;&#160;</a></span>refresh_book_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None application.db.book.refresh_book_data </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>rfid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Refreshes the book data in the database using the provided RFID.

    This function retrieves the book data from the database using the RFID,
    fetches updated book information from the Google Books API, and updates
    the database with the new information. If the book data does not exist
    in the database, it raises a BookTagDoesNotExistError.

    Args:
        rfid (str): The RFID of the book to refresh.

    Raises:
        BookTagDoesNotExistError: If the book data does not exist in the database.</pre> 
</div>
</div>
<a id="ac6f7d9e683c20144c289b18db8a2f898" name="ac6f7d9e683c20144c289b18db8a2f898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6f7d9e683c20144c289b18db8a2f898">&#9670;&#160;</a></span>return_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.return_book </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>book_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Return a borrowed book to the library.

    Args:
        book_id (str): The ID of the book to be returned.
        user_data (dict): The data of the user returning the book, containing at least the user's ID.

    Returns:
        dict: The data of the book being returned.

    Raises:
        BookTagDoesNotExistError: If the book with the given ID does not exist.
        BookCannotBeShared: If the book is not currently shared or if the user did not borrow the book.</pre> 
</div>
</div>
<a id="abe4d5cfe9e99e63202c9f89f81cc7c2a" name="abe4d5cfe9e99e63202c9f89f81cc7c2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe4d5cfe9e99e63202c9f89f81cc7c2a">&#9670;&#160;</a></span>set_book_owner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.set_book_owner </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Updates the owner of a book and records the ownership history.

    Args:
        id (str): The unique identifier of the book.
        username (str): The username of the new owner.

    Returns:
        dict: The updated book data including the new owner and ownership history.</pre> 
</div>
</div>
<a id="a3e108f60a26b843794573c6eb1f6855f" name="a3e108f60a26b843794573c6eb1f6855f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e108f60a26b843794573c6eb1f6855f">&#9670;&#160;</a></span>share_book_with_non_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.share_book_with_non_user </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>book_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Share a book with a non-user by updating the book's share history.

    Args:
        book_id (str): The ID of the book to be shared.
        name (str): The name of the non-user with whom the book is being shared.

    Returns:
        dict: The book data after the share operation.

    Raises:
        exceptions.BookTagDoesNotExistError: If the book with the given ID does not exist.</pre> 
</div>
</div>
<a id="ae900b61961a58bd2551324a9cda362e7" name="ae900b61961a58bd2551324a9cda362e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae900b61961a58bd2551324a9cda362e7">&#9670;&#160;</a></span>share_book_with_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.share_book_with_user </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>book_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Marke a book as shared (with a user), updating the book's share history.

    Args:
        book_id (str): The ID of the book to be shared.
        username (str): The username of the user with whom the book is being shared.

    Returns:
        dict: The book data after the share operation.

    Raises:
        exceptions.BookTagDoesNotExistError: If the book with the given ID does not exist.</pre> 
</div>
</div>
<a id="ae77c33c66dfbe1c62759dadb339221a5" name="ae77c33c66dfbe1c62759dadb339221a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae77c33c66dfbe1c62759dadb339221a5">&#9670;&#160;</a></span>unlink_book_tag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> dict application.db.book.unlink_book_tag </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>rfid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">    Unlink a book tag from the database using its RFID.

    This function searches for a book in the database using the provided RFID.
    If the book is found, it deletes the book entry from the database and removes
    any reference to its thumbnail if it is a locally hosted blob.

    Args:
        rfid (str): The RFID of the book to be unlinked.

    Returns:
        dict: The data of the book that was unlinked.

    Raises:
        BookTagDoesNotExistError: If no book with the given RFID is found in the database.</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5c6eda017a0786d7b6359f440e8ad167" name="a5c6eda017a0786d7b6359f440e8ad167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6eda017a0786d7b6359f440e8ad167">&#9670;&#160;</a></span>_P</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">dict application.db.book._P</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  {</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&#39;tag&#39;</span>: re.compile(<span class="stringliteral">r&#39;&lt;/?\w+&gt;&#39;</span>),</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&#39;nonwd&#39;</span>: re.compile(<span class="stringliteral">r&#39;[^\w]+&#39;</span>),</div>
<div class="line"><span class="lineno">    4</span>}</div>
</div><!-- fragment -->
<p>Regular expressions used for extracting keywords from text. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceapplication.html">application</a></li><li class="navelem"><a class="el" href="namespaceapplication_1_1db.html">db</a></li><li class="navelem"><a class="el" href="namespaceapplication_1_1db_1_1book.html">book</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
